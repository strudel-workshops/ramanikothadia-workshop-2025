import{d as g,a as le,g as ae,_ as H,ac as me,b as j,e as se,j as o,s as ie,h as ne,i as A,k as de,l as he,n as I,o as G,p as O,q,ad as ge,K as V,B as y,N as K,S as N,T as J,v as ue,G as xe,A as Q,ae as ve,M as X,w as be,P as Ce}from"./index-DNw4fbmd.js";import{H as je}from"./Home-B28rKbkI.js";import{D as ye}from"./Download-B3ihFe8d.js";import{u as ce,F as Be,a as Re}from"./FilterField-DC_Xfzso.js";import{f as $e,F as Te}from"./filters.utils-BtCTFQ3a.js";import{u as _e}from"./useDataFromSource-Db5IP8Qv.js";import{S as Se,D as we}from"./DataGrid-ClocBCB3.js";import{F as ze}from"./FilterList-BybU7sXY.js";import{a as Pe}from"./queryParams.utils-0nFsCxa3.js";import{I as De}from"./ImageWrapper-Bs_QiGQG.js";import{a as k}from"./IconButton-CdJ2IDGe.js";import"./DatePicker-BwQpqbYz.js";import"./DateCalendar-tw6y10MT.js";import"./MenuItem-5X4vX-1m.js";import"./dividerClasses-B0wO3gO8.js";import"./Close-COkHL3f4.js";import"./useGridRootProps-bdjj5wvp.js";import"./Divider-C8G9viXD.js";function Fe(e){return g.Children.toArray(e).filter(t=>g.isValidElement(t))}function Me(e){return ae("MuiToggleButton",e)}const R=le("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),pe=g.createContext({}),fe=g.createContext(void 0);function ke(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}const Le=["value"],Ne=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Ae=e=>{const{classes:t,fullWidth:r,selected:l,disabled:s,size:n,color:d}=e,u={root:["root",l&&"selected",s&&"disabled",r&&"fullWidth",`size${A(n)}`,d]};return de(u,Me,t)},Ie=ie(he,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`size${A(r.size)}`]]}})(({theme:e,ownerState:t})=>{let r=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,l;return e.vars&&(r=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,l=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),j({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${R.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:k(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${R.selected}`]:{color:r,backgroundColor:e.vars?`rgba(${l} / ${e.vars.palette.action.selectedOpacity})`:k(r,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${l} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:k(r,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${l} / ${e.vars.palette.action.selectedOpacity})`:k(r,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),L=g.forwardRef(function(t,r){const l=g.useContext(pe),{value:s}=l,n=H(l,Le),d=g.useContext(fe),u=me(j({},n,{selected:ke(t.value,s)}),t),f=se({props:u,name:"MuiToggleButton"}),{children:m,className:a,color:h="standard",disabled:c=!1,disableFocusRipple:p=!1,fullWidth:W=!1,onChange:B,onClick:b,selected:z,size:P="medium",value:$}=f,D=H(f,Ne),F=j({},f,{color:h,disabled:c,disableFocusRipple:p,fullWidth:W,size:P}),E=Ae(F),v=C=>{b&&(b(C,$),C.defaultPrevented)||B&&B(C,$)},x=d||"";return o.jsx(Ie,j({className:ne(n.className,E.root,a,x),disabled:c,focusRipple:!p,ref:r,onClick:v,onChange:B,value:$,ownerState:F,"aria-pressed":z},D,{children:m}))});function Ge(e){return ae("MuiToggleButtonGroup",e)}const i=le("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),Oe=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],qe=e=>{const{classes:t,orientation:r,fullWidth:l,disabled:s}=e,n={root:["root",r==="vertical"&&"vertical",l&&"fullWidth"],grouped:["grouped",`grouped${A(r)}`,s&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return de(n,Ge,t)},We=ie("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${i.grouped}`]:t.grouped},{[`& .${i.grouped}`]:t[`grouped${A(r.orientation)}`]},{[`& .${i.firstButton}`]:t.firstButton},{[`& .${i.lastButton}`]:t.lastButton},{[`& .${i.middleButton}`]:t.middleButton},t.root,r.orientation==="vertical"&&t.vertical,r.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>j({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${i.grouped}`]:j({},e.orientation==="horizontal"?{[`&.${i.selected} + .${i.grouped}.${i.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${i.selected} + .${i.grouped}.${i.selected}`]:{borderTop:0,marginTop:0}})},e.orientation==="horizontal"?{[`& .${i.firstButton},& .${i.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${i.lastButton},& .${i.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${i.firstButton},& .${i.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${i.lastButton},& .${i.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},e.orientation==="horizontal"?{[`& .${i.lastButton}.${R.disabled},& .${i.middleButton}.${R.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${i.lastButton}.${R.disabled},& .${i.middleButton}.${R.disabled}`]:{borderTop:"1px solid transparent"}})),Y=g.forwardRef(function(t,r){const l=se({props:t,name:"MuiToggleButtonGroup"}),{children:s,className:n,color:d="standard",disabled:u=!1,exclusive:f=!1,fullWidth:m=!1,onChange:a,orientation:h="horizontal",size:c="medium",value:p}=l,W=H(l,Oe),B=j({},l,{disabled:u,fullWidth:m,orientation:h,size:c}),b=qe(B),z=g.useCallback((v,x)=>{if(!a)return;const C=p&&p.indexOf(x);let M;p&&C>=0?(M=p.slice(),M.splice(C,1)):M=p?p.concat(x):[x],a(v,M)},[a,p]),P=g.useCallback((v,x)=>{a&&a(v,p===x?null:x)},[a,p]),$=g.useMemo(()=>({className:b.grouped,onChange:f?P:z,value:p,size:c,fullWidth:m,color:d,disabled:u}),[b.grouped,f,P,z,p,c,m,d,u]),D=Fe(s),F=D.length,E=v=>{const x=v===0,C=v===F-1;return x&&C?"":x?b.firstButton:C?b.lastButton:b.middleButton};return o.jsx(We,j({role:"group",className:ne(b.root,n),ref:r,ownerState:B},W,{children:o.jsx(pe.Provider,{value:$,children:D.map((v,x)=>o.jsx(fe.Provider,{value:E(x),children:v},x))})}))});var T={},Z;function Ee(){if(Z)return T;Z=1;var e=I();Object.defineProperty(T,"__esModule",{value:!0}),T.default=void 0;var t=e(G()),r=O();return T.default=(0,t.default)((0,r.jsx)("path",{d:"M2.5 4v3h5v12h3V7h5V4zm19 5h-9v3h3v7h3v-7h3z"}),"TextFields"),T}var Ve=Ee();const Ue=q(Ve);var _={},ee;function He(){if(ee)return _;ee=1;var e=I();Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var t=e(G()),r=O();return _.default=(0,t.default)((0,r.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),_}var Je=He();const Ke=q(Je);var S={},te;function Qe(){if(te)return S;te=1;var e=I();Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var t=e(G()),r=O();return S.default=(0,t.default)((0,r.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3"}),"Groups"),S}var Xe=Qe();const Ye=q(Xe);var w={},oe;function Ze(){if(oe)return w;oe=1;var e=I();Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var t=e(G()),r=O();return w.default=(0,t.default)((0,r.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),w}var et=Ze();const tt=q(et),ot=(e,t)=>K(e).isAfter(K(t))?1:0,rt=[{field:"id",headerName:"Run #",width:100},{field:"experiment_name",headerName:"Name",width:250,flex:1},{field:"cromwell_result",headerName:"Cromwell Result",width:150},{field:"status",headerName:"Status",width:120},{field:"user",headerName:"User",width:120},{field:"site",headerName:"Site",width:100},{field:"start_time",headerName:"Submitted",sortComparator:ot,width:150},{field:"end_time",headerName:"Updated",width:150}],lt=({filterConfigs:e,searchTerm:t,searchMode:r,showMyRuns:l=!1,onFilteredDataChange:s})=>{const{activeFilters:n}=ce(),d=ge(),u=_e("data/runs-all-all-any-7-2025-10-23.csv"),f=V.useMemo(()=>u?u.map(a=>({id:a["Run#"],experiment_name:a.Name,start_time:a.Submitted,end_time:a.Updated,status:a.Status,cromwell_result:a["Cromwell Result"],tag:a.Tag,user:a.User,site:a.Site})):null,[u]),m=V.useMemo(()=>{if(!f)return[];let a=$e(f,n,e,t,r);return l&&(a=a.filter(h=>h.user==="current_user")),a},[f,n,e,t,r,l]);if(V.useEffect(()=>{s&&m.length>0&&s(m)},[m,s]),!f){const h=new Array(10).fill(null).map((c,p)=>p);return o.jsx(y,{sx:{padding:2},children:h.map(c=>o.jsx(Se,{height:50},c))})}return o.jsx(o.Fragment,{children:o.jsx(we,{rows:m,getRowId:a=>a.id,columns:rt,initialState:{sorting:{sortModel:[{field:"start_time",sort:"desc"}]}},onRowClick:()=>d({to:"/monitor-activities/detail"}),disableColumnSelector:!0,disableRowSelectionOnClick:!0})})},at=({onToggleFiltersPanel:e})=>o.jsxs(N,{direction:"row",spacing:2,alignItems:"center",sx:{overflow:"hidden",padding:2},children:[o.jsx(J,{variant:"h6",component:"h2",flex:1,children:"Experiments List"}),o.jsx(ue,{startIcon:o.jsx(ze,{}),onClick:e,children:"Filters"})]}),st=({filterConfigs:e,onClose:t})=>o.jsx(Te,{grouped:!1,onClose:t,sx:{border:"none"},children:e.map((r,l)=>o.jsx(Be,{field:r.field,label:r.label,operator:r.operator||"contains",filterComponent:r.filterComponent,filterProps:r.filterProps},`${r.field}-${l}`))}),it=({filterConfigs:e})=>{const t=xe(),r=()=>{};return o.jsxs(y,{sx:{width:t.layout.filterPanelWidth,height:"100vh",position:"sticky",top:0,borderRight:"1px solid",borderColor:"grey.300",backgroundColor:"white",display:"flex",flexDirection:"column"},children:[o.jsx(y,{sx:{p:2,borderBottom:"1px solid",borderColor:"grey.300"},children:o.jsxs(N,{direction:"row",spacing:1,alignItems:"center",children:[o.jsx(Q,{to:"/",children:o.jsx(De,{height:30,children:o.jsx("img",{src:Pe("/ramanikothadia-workshop-2025//strudel-logo-icon.png"),alt:"Logo"})})}),o.jsx(Q,{to:"/",children:o.jsx(J,{variant:"h6",component:"div",fontWeight:"bold",children:"My Project"})})]})}),o.jsx(y,{sx:{flex:1,overflow:"auto"},children:o.jsx(st,{filterConfigs:e,onClose:r})})]})};function nt(e,t){if(!e||e.length===0)return"";const r=t.join(","),l=e.map(s=>t.map(n=>{const d=s[n];if(d==null)return"";const u=String(d);return u.includes(",")||u.includes('"')||u.includes(`
`)?`"${u.replace(/"/g,'""')}"`:u}).join(","));return[r,...l].join(`
`)}function dt(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),s=URL.createObjectURL(r);l.setAttribute("href",s),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)}function U(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ut(e){const t=new Date,r=t.toISOString().split("T")[0],l=t.toTimeString().split(" ")[0].replace(/:/g,"-"),s=h=>{const c=e.find(p=>p.field===h);return c==null?void 0:c.value},n=s("site");let d;Array.isArray(n)&&n.length>0?n.length===1?d=U(n[0]):d="sites"+n.map(U).join(""):d="all";const u=s("status")||"all",f=s("cromwell_result");let m;Array.isArray(f)&&f.length>0?m=f.map(U).join(""):m="any";const a=s("days")||"7";return`runs-${d}-${u}-${m}-${a}-${r}_${l}.csv`}const re=[{field:"site",label:"Site",operator:"contains-one-of",filterComponent:"MultiSelectDropdown",filterProps:{options:[{label:"Crux",value:"crux"},{label:"Defiant",value:"defiant"},{label:"Dori",value:"dori"},{label:"JGI",value:"jgi"},{label:"KBase",value:"kbase"},{label:"NMDC",value:"nmdc"},{label:"NMDC Tahoma",value:"nmdc_tahoma"},{label:"Perlmutter",value:"perlmutter"},{label:"Tahoma",value:"tahoma"},{label:"Any",value:"any"}],placeholder:"Select sites..."}},{field:"days",label:"Days",operator:"equals",filterComponent:"TextField",filterProps:{type:"number",placeholder:"Enter number of days..."}},{field:"status",label:"Status",operator:"equals",filterComponent:"SingleSelectDropdown",filterProps:{options:[{label:"Active",value:"active"},{label:"Done",value:"done"},{label:"Any",value:"any"}],placeholder:"Select status..."}},{field:"cromwell_result",label:"Result",operator:"contains-one-of",filterComponent:"MultiSelectDropdown",filterProps:{options:[{label:"Succeeded",value:"succeeded"},{label:"Failed",value:"failed"},{label:"Cancelled",value:"cancelled"},{label:"Any",value:"any"}],placeholder:"Select results..."}}];function ct(){const[e,t]=g.useState(""),[r,l]=g.useState("text"),[s,n]=g.useState(!1),[d,u]=g.useState([]),{activeFilters:f}=ce(),m=g.useCallback(h=>{u(h)},[]),a=()=>{if(d.length===0)return;const c=nt(d,["id","experiment_name","cromwell_result","status","user","site","start_time","end_time"]),p=ut(f);dt(c,p)};return o.jsxs(N,{direction:"row",sx:{height:"100vh",overflow:"hidden"},children:[o.jsx(it,{filterConfigs:re}),o.jsxs(y,{sx:{flex:1,overflow:"auto",display:"flex",flexDirection:"column"},children:[o.jsxs(y,{sx:{p:2,borderBottom:"1px solid",borderColor:"grey.300",display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},children:[o.jsxs(ve,{"aria-label":"breadcrumb",children:[o.jsx(X,{underline:"hover",color:"inherit",href:"/",children:o.jsx(je,{sx:{verticalAlign:"middle"}})}),o.jsx(X,{underline:"hover",color:"inherit",children:"..."}),o.jsx(J,{color:"text.primary",children:"Monitor Activities"})]}),o.jsxs(N,{direction:"row",spacing:1,alignItems:"center",children:[o.jsx(be,{variant:"outlined",label:"Search",size:"small",value:e,onChange:h=>t(h.target.value),sx:{minWidth:250}}),o.jsxs(Y,{value:r,exclusive:!0,onChange:(h,c)=>{c!==null&&l(c)},size:"small","aria-label":"search mode",children:[o.jsx(L,{value:"text","aria-label":"text search",children:o.jsx(Ue,{fontSize:"small"})}),o.jsx(L,{value:"regex","aria-label":"regex search",children:o.jsx(Ke,{fontSize:"small"})})]}),o.jsxs(Y,{value:s?"mine":"all",exclusive:!0,onChange:(h,c)=>{c!==null&&n(c==="mine")},size:"small","aria-label":"user filter",children:[o.jsx(L,{value:"all","aria-label":"all runs",children:o.jsx(Ye,{fontSize:"small"})}),o.jsx(L,{value:"mine","aria-label":"my runs",children:o.jsx(tt,{fontSize:"small"})})]}),o.jsx(ue,{variant:"outlined",size:"small",startIcon:o.jsx(ye,{}),onClick:a,disabled:d.length===0,"aria-label":"export to CSV",sx:{height:"40px",minHeight:"40px"},children:"Export"})]})]}),o.jsxs(Ce,{elevation:0,sx:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[o.jsx(at,{onToggleFiltersPanel:()=>{}}),o.jsx(y,{sx:{flex:1,minHeight:0},children:o.jsx(lt,{filterConfigs:re,searchTerm:e,searchMode:r,showMyRuns:s,onFilteredDataChange:m})})]})]})]})}const zt=function(){return o.jsx(Re,{children:o.jsx(ct,{})})};export{zt as component};
